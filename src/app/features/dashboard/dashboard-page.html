<div class="container mx-auto">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-slate-900">Bienvenida, {{ username() | titlecase }}</h1>
    <p class="text-lg text-slate-500 mt-1">Aquí tienes un resumen rápido del sistema.</p>
  </div>

  <!-- Stats Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <div
      class="bg-white p-6 rounded-xl border border-slate-200 flex items-start justify-between hover:border-sky-500 transition-all duration-300 transform hover:-translate-y-1 shadow-sm hover:shadow-lg"
    >
      <div>
        <h2 class="text-sm font-medium text-slate-500">Total de Personas</h2>
        <p class="text-3xl font-bold text-sky-500 mt-2">{{ totalPeople() }}</p>
      </div>
      <div class="bg-sky-100 p-3 rounded-lg">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 text-sky-600"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.67c.61 1.077.923 2.18.923 3.321zM3.75 4.875c0-1.036.84-1.875 1.875-1.875h9.375c1.036 0 1.875.84 1.875 1.875v9.375c0 1.036-.84 1.875-1.875 1.875H5.625c-1.036 0-1.875-.84-1.875-1.875V4.875z"
          />
        </svg>
      </div>
    </div>
    <div
      class="bg-white p-6 rounded-xl border border-slate-200 flex items-start justify-between hover:border-teal-500 transition-all duration-300 transform hover:-translate-y-1 shadow-sm hover:shadow-lg"
    >
      <div>
        <h2 class="text-sm font-medium text-slate-500">Con CUD Vigente</h2>
        <p class="text-3xl font-bold text-teal-500 mt-2">{{ withCUD() }}</p>
      </div>
      <div class="bg-teal-100 p-3 rounded-lg">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 text-teal-600"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
      </div>
    </div>
    <div
      class="bg-white p-6 rounded-xl border border-slate-200 flex items-start justify-between hover:border-amber-500 transition-all duration-300 transform hover:-translate-y-1 shadow-sm hover:shadow-lg"
    >
      <div>
        <h2 class="text-sm font-medium text-slate-500">Con Pensión</h2>
        <p class="text-3xl font-bold text-amber-500 mt-2">{{ withPension() }}</p>
      </div>
      <div class="bg-amber-100 p-3 rounded-lg">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 text-amber-600"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"
          />
        </svg>
      </div>
    </div>
    <div
      class="bg-white p-6 rounded-xl border border-slate-200 flex items-start justify-between hover:border-rose-500 transition-all duration-300 transform hover:-translate-y-1 shadow-sm hover:shadow-lg"
    >
      <div>
        <h2 class="text-sm font-medium text-slate-500">Con Pase Libre</h2>
        <p class="text-3xl font-bold text-rose-500 mt-2">{{ withPaseLibre() }}</p>
      </div>
      <div class="bg-rose-100 p-3 rounded-lg">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 text-rose-600"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-12h1.5M6 9h1.5M6 12h1.5M6 15h1.5M12 6v12m3-8.5v5.25m-6-5.25v5.25m-3-5.25v5.25M3 6h18"
          />
        </svg>
      </div>
    </div>
  </div>

  <!-- Quick Actions & Recent People -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <div class="lg:col-span-1">
      <h3 class="text-lg font-semibold text-slate-800 mb-4">Accesos Rápidos</h3>
      <div class="space-y-4">
        <a
          routerLink="/personas"
          class="w-full flex items-center justify-start p-4 bg-white rounded-xl border border-slate-200 hover:border-teal-500 transition-all duration-300 shadow-sm hover:shadow-md"
        >
          <div class="bg-teal-100 p-3 rounded-lg mr-4">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 text-teal-600"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M8.25 6.75h7.5M8.25 12h7.5m-7.5 5.25h7.5M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"
              />
            </svg>
          </div>
          <div>
            <p class="font-semibold text-slate-800">Ver Lista de Personas</p>
            <p class="text-sm text-slate-500">Ver y gestionar todos los registros</p>
          </div>
        </a>
        <!-- This button could trigger the "Add Person" modal directly in a future implementation -->
        <a
          routerLink="/personas"
          class="w-full flex items-center justify-start p-4 bg-white rounded-xl border border-slate-200 hover:border-teal-500 transition-all duration-300 shadow-sm hover:shadow-md"
        >
          <div class="bg-teal-100 p-3 rounded-lg mr-4">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 text-teal-600"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"
              />
            </svg>
          </div>
          <div>
            <p class="font-semibold text-slate-800">Agregar Nueva Persona</p>
            <p class="text-sm text-slate-500">Crear un nuevo registro en el sistema</p>
          </div>
        </a>
      </div>
    </div>
    <div class="lg:col-span-2">
      <h3 class="text-lg font-semibold text-slate-800 mb-4">Últimos Registros</h3>
      <div class="bg-white border border-slate-200 rounded-xl shadow-lg overflow-hidden">
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-slate-200">
            <thead class="bg-slate-50">
              <tr>
                <th
                  scope="col"
                  class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"
                >
                  Nombre Completo
                </th>
                <th
                  scope="col"
                  class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"
                >
                  DNI
                </th>
                <th
                  scope="col"
                  class="hidden sm:table-cell px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"
                >
                  Fecha de Emp.
                </th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-slate-200">
              @for (person of latestPeople(); track person.id) {
              <tr
                [routerLink]="['/personas', person.id]"
                class="cursor-pointer hover:bg-gray-100 transition-colors"
              >
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900">
                  {{ person.nombreCompleto }}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-700">
                  {{ person.dni | number }}
                </td>
                <td class="hidden sm:table-cell px-6 py-4 whitespace-nowrap text-sm text-slate-700">
                  {{ person.fechaEmpadronamiento }}
                </td>
              </tr>
              } @empty {
              <tr>
                <td colspan="3" class="px-6 py-8 text-center text-slate-500">
                  No hay registros recientes.
                </td>
              </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
