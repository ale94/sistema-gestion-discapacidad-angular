<div class="container mx-auto">
  <div class="mb-8">
    <h1 class="text-2xl sm:text-3xl md:text-3xl font-bold text-slate-900">
      Bienvenida, {{ username() | titlecase }}
    </h1>
    <p class="text-base sm:text-lg md:text-xl text-slate-500 mt-1">
      Aquí tienes un resumen rápido del sistema.
    </p>
  </div>

  <!-- Stats Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <div
      class="bg-white p-6 rounded-xl border border-slate-200 flex items-start justify-between hover:border-sky-500 transition-all duration-300 transform hover:-translate-y-1 shadow-sm hover:shadow-lg"
    >
      <div>
        <h2 class="text-sm font-medium text-slate-500">Total de Personas</h2>
        <p class="text-3xl font-bold text-sky-500 mt-2">{{ totalPeople() }}</p>
      </div>
      <div class="bg-sky-100 p-3 rounded-lg">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          class="bi bi-person h-6 w-6 text-sky-600"
          viewBox="0 0 16 16"
        >
          <path
            d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"
          />
        </svg>
      </div>
    </div>
    <div
      class="bg-white p-6 rounded-xl border border-slate-200 flex items-start justify-between hover:border-teal-500 transition-all duration-300 transform hover:-translate-y-1 shadow-sm hover:shadow-lg"
    >
      <div>
        <h2 class="text-sm font-medium text-slate-500">Con CUD Vigente</h2>
        <p class="text-3xl font-bold text-teal-500 mt-2">{{ withCUD() }}</p>
      </div>
      <div class="bg-teal-100 p-3 rounded-lg">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 text-teal-600"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
      </div>
    </div>
    <div
      class="bg-white p-6 rounded-xl border border-slate-200 flex items-start justify-between hover:border-amber-500 transition-all duration-300 transform hover:-translate-y-1 shadow-sm hover:shadow-lg"
    >
      <div>
        <h2 class="text-sm font-medium text-slate-500">Con Pensión</h2>
        <p class="text-3xl font-bold text-amber-500 mt-2">{{ withPension() }}</p>
      </div>
      <div class="bg-amber-100 p-3 rounded-lg">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 text-amber-600"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"
          />
        </svg>
      </div>
    </div>
    <div
      class="bg-white p-6 rounded-xl border border-slate-200 flex items-start justify-between hover:border-rose-500 transition-all duration-300 transform hover:-translate-y-1 shadow-sm hover:shadow-lg"
    >
      <div>
        <h2 class="text-sm font-medium text-slate-500">Con Pase Libre</h2>
        <p class="text-3xl font-bold text-rose-500 mt-2">{{ withPaseLibre() }}</p>
      </div>
      <div class="bg-rose-100 p-3 rounded-lg">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="bi bi-unlock h-6 w-6 text-rose-600"
          fill="currentColor"
          viewBox="0 0 18 18"
        >
          <path
            fill-rule="evenodd"
            d="M12 0a4 4 0 0 1 4 4v2.5h-1V4a3 3 0 1 0-6 0v2h.5A2.5 2.5 0 0 1 12 8.5v5A2.5 2.5 0 0 1 9.5 16h-7A2.5 2.5 0 0 1 0 13.5v-5A2.5 2.5 0 0 1 2.5 6H8V4a4 4 0 0 1 4-4M2.5 7A1.5 1.5 0 0 0 1 8.5v5A1.5 1.5 0 0 0 2.5 15h7a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 9.5 7z"
          />
        </svg>
      </div>
    </div>
  </div>

  <!-- Quick Actions & Recent People -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <div class="lg:col-span-1">
      <h3 class="text-lg font-semibold text-slate-800 mb-4">Accesos Rápidos</h3>
      <div class="space-y-4">
        <a
          routerLink="/personas"
          class="w-full flex items-center justify-start p-4 bg-white rounded-xl border border-slate-200 hover:border-teal-500 transition-all duration-300 shadow-sm hover:shadow-md"
        >
          <div class="bg-teal-100 p-3 rounded-lg mr-4">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 text-teal-600"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M8.25 6.75h7.5M8.25 12h7.5m-7.5 5.25h7.5M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"
              />
            </svg>
          </div>
          <div>
            <p class="font-semibold text-slate-800">Ver Lista de Personas</p>
            <p class="text-sm text-slate-500">Ver y gestionar todos los registros</p>
          </div>
        </a>
        <!-- This button could trigger the "Add Person" modal directly in a future implementation -->
        <a
          routerLink="/personas"
          class="w-full flex items-center justify-start p-4 bg-white rounded-xl border border-slate-200 hover:border-teal-500 transition-all duration-300 shadow-sm hover:shadow-md"
        >
          <div class="bg-teal-100 p-3 rounded-lg mr-4">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 text-teal-600"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"
              />
            </svg>
          </div>
          <div>
            <p class="font-semibold text-slate-800">Agregar Nueva Persona</p>
            <p class="text-sm text-slate-500">Crear un nuevo registro en el sistema</p>
          </div>
        </a>
      </div>
    </div>
    <div class="lg:col-span-2">
      <h3 class="text-lg font-semibold text-slate-800 mb-4">Últimos Registros</h3>
      <div class="bg-white border border-slate-200 rounded-xl shadow-lg overflow-hidden">
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-slate-200">
            <thead class="bg-slate-50">
              <tr>
                <th
                  scope="col"
                  class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"
                >
                  Nombre Completo
                </th>
                <th
                  scope="col"
                  class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"
                >
                  DNI
                </th>
                <th
                  scope="col"
                  class="hidden sm:table-cell px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"
                >
                  Fecha de Emp.
                </th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-slate-200">
              @for (person of latestPeople(); track person.id) {
              <tr
                [routerLink]="['/personas', person.id]"
                class="cursor-pointer hover:bg-gray-100 transition-colors"
              >
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900">
                  {{ person.nombreCompleto }}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-700">
                  {{ person.dni | number }}
                </td>
                <td class="hidden sm:table-cell px-6 py-4 whitespace-nowrap text-sm text-slate-700">
                  {{ person.fechaEmpadronamiento }}
                </td>
              </tr>
              } @empty {
              <tr>
                <td colspan="3" class="px-6 py-8 text-center text-slate-500">
                  No hay registros recientes.
                </td>
              </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
